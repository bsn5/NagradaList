# Реализация приложения NagradaList для macOS

## Обзор

Приложение переделано с VB.NET на Swift для macOS с использованием SQLite вместо MS Access.

## Реализованные компоненты

### 1. DatabaseManager.swift
- Класс для работы с SQLite базой данных
- Методы для выполнения запросов и обновлений
- Поддержка параметризованных запросов
- Функции для получения имени оператора и подсчета записей

### 2. NagradaModel.swift
- Модель данных для наград
- Методы для форматирования данных
- Преобразование из словарей базы данных

### 3. MainWindowController.swift
- Главное окно приложения с вкладками
- Управление таблицей наград
- Фильтрация и поиск
- Интеграция с базой данных

### 4. AwardDetailWindowController.swift
- Окно редактирования/создания награды
- Все поля формы
- Валидация данных
- Проверка дубликатов
- Сохранение в базу данных

### 5. Constants.swift
- Константы приложения
- Списки названий наград
- Списки обязательных полей

## Структура базы данных

Приложение работает с SQLite базой данных `base.db` со следующими основными таблицами:
- `nagrada` - основная таблица наград
- `nagrada_backup` - резервная копия
- `USERLIST` - список пользователей
- `часть`, `подразделение`, `чин`, `архив` - справочники
- `Условия на номера` - условия для проверки номеров
- `Обязательные поля` - настройки обязательных полей

## Функционал

### Реализовано:
1. ✅ Подключение к SQLite базе данных
2. ✅ Просмотр списка наград в таблице
3. ✅ Создание и редактирование наград
4. ✅ Фильтрация по группам (кампания, часть, чин и т.д.)
5. ✅ Поиск в таблице
6. ✅ Управление именем оператора
7. ✅ Базовая структура для всех вкладок

### Требует доработки:
1. ⚠️ Полная реализация UI элементов в Storyboard/XIB
2. ⚠️ Выгрузка в Word (требует интеграции с macOS API для работы с документами)
3. ⚠️ Условия на номера (UI готов, логика частично)
4. ⚠️ Групповая замена (структура готова)
5. ⚠️ Обязательные поля (структура готова)
6. ⚠️ Выгрузка данных (структура готова)

## Использование

1. Убедитесь, что файл `base.db` находится в корне проекта или в Documents
2. Запустите приложение
3. Используйте кнопку "Открыть" для загрузки данных из базы
4. Используйте "Добавить" для создания новой награды
5. Двойной клик по записи открывает форму редактирования

## Заметки

- Все IBOutlets сделаны опциональными для работы с/без Storyboard
- SQL запросы используют экранирование для безопасности
- Дата форматируется в формате SQLite (YYYY-MM-DD HH:MM:SS)
- Приложение автоматически ищет базу данных в нескольких местах

## Следующие шаги

1. Создать полный UI в Storyboard или XIB файлах
2. Реализовать экспорт в Word/PDF
3. Доработать логику групповых операций
4. Добавить валидацию обязательных полей
5. Реализовать выгрузку данных


